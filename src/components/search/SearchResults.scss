@use '../../styles/dropdown-result-item';
@use '../../styles/variables' as *;

// Search results specific styling
.search-results {
  // Any search-specific styling can go here
}

// Mobile sticky header wrapper - contains both search input and results count
.search-mobile-sticky-header {
  position: sticky;
  top: 0;
  z-index: 10;
  background-color: var(--color-bg-mobile-drawer);
}

// Mobile search header - contains the input field
.search-mobile-header {
  padding: $s-4;
}

// Mobile search results count - small text below search input
.search-results-count {
  padding: $s-0 $s-4 $s-3 $s-4;
  margin-top: -$s-2;
}

.search-mobile-input {
  // Hide browser's native search clear button (conflicts with Input primitive's clearable)
  .quorum-input::-webkit-search-cancel-button {
    display: none;
    -webkit-appearance: none;
  }
}

.search-context-text {
  display: block;
  margin-top: $s-2;
  padding: $s-0 $s-1;
}

// Use shared list styling with zero horizontal padding for full-width borders
.search-results-list {
  @extend .dropdown-results-list;
  padding: $s-0 $s-0 $s-4 $s-0 !important; // Override to ensure zero horizontal padding

  // On desktop, handle own scrolling with slightly different height
  @media (hover: hover) and (pointer: fine) {
    max-height: 340px; // Slightly different from default
  }

  // On mobile (touch devices in MobileDrawer), allow controlled height from inline styles
  @media (max-width: 768px) {
    max-height: none !important; // Allow inline styles to control height
    overflow-y: visible;
    // Safe area handling for bottom sheet content
    // Matches MessageComposer and MobileDrawer patterns
    padding-bottom: calc(8px + env(safe-area-inset-bottom, 0)) !important;
  }
}

// Use shared empty state styling
.search-empty-state {
  @extend .dropdown-empty-state;
}

.search-loading-state {
  @extend .dropdown-loading-state;
}

.search-error-state {
  @extend .dropdown-empty-state;
}

.search-no-results {
  @extend .dropdown-empty-state;
}

.empty-icon {
  @extend .dropdown-empty-icon;
}

.loading-icon {
  @extend .dropdown-loading-icon;
}

.error-icon {
  @extend .dropdown-empty-icon;
  color: rgb(var(--danger));
}

.empty-message {
  @extend .dropdown-empty-message;
}

.loading-message {
  @extend .dropdown-loading-message;
}

.error-message {
  @extend .dropdown-empty-message;
  color: rgb(var(--danger));
}

.empty-hint {
  @extend .dropdown-empty-hint;
}

// Dark theme adjustments (shadow now handled automatically by CSS variables via DropdownPanel)
// No need for separate dark theme shadow override

// Animation for opening/closing
.search-results {
  animation: searchResultsOpen 0.2s ease-out;
}

@keyframes searchResultsOpen {
  from {
    opacity: 0;
    transform: translateY(-8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

// Touch-optimized result items on mobile
@media (max-width: 768px) {
  .search-result-item {
    // Larger touch targets (minimum 44px height per mobile guidelines)
    min-height: 44px;
    padding: $s-3 $s-4;

    // More spacing between items for easier tapping
    &:not(:last-child) {
      border-bottom: $border solid var(--color-border-mobile-drawer-item);
    }
  }
}
