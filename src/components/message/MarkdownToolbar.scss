@use '../../styles/variables' as *;

/**
 * Markdown Toolbar - Discord-style floating toolbar
 * Appears above selected text in MessageComposer
 * Features tooltip-style arrow pointing to selection
 */
.markdown-toolbar {
  position: fixed;
  display: flex;
  gap: $s-0-5; // 2px gap between buttons
  background: var(--color-bg-tooltip);
  border: $border-2 solid var(--color-border-strong);
  border-radius: $rounded-lg;
  padding: $s-1 0 $s-1 $s-2;
  box-shadow: $shadow-lg;
  z-index: 10002; // Same as tooltips - above DropdownPanel
  pointer-events: auto;

  // Smooth appearance animation
  animation: toolbar-fade-in $duration-150 ease-out;

  // Tooltip-style arrow border (outer layer)
  // Note: Using px instead of rem for precise geometric alignment
  &::before {
    content: '';
    position: absolute;
    bottom: -8px; // Position below the toolbar (includes 2px border)
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 8px solid transparent;
    border-right: 8px solid transparent;
    border-top: 8px solid var(--color-border-strong); // Match toolbar border color
  }

  // Tooltip-style arrow fill (inner layer)
  &::after {
    content: '';
    position: absolute;
    bottom: -6px; // 2px higher than border (accounts for 2px border width)
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 6px solid transparent;
    border-right: 6px solid transparent;
    border-top: 6px solid var(--color-bg-tooltip);
    z-index: 1; // Ensure it sits on top of the border
  }

  // Button styling - the icon inherits color from the button
  .quorum-button,
  button,
  span[class*='btn'] {
    color: var(--color-text-subtle) !important;
    transition: color $duration-150 ease !important;

    &:hover {
      color: var(--color-text-main) !important;
    }
  }
}

@keyframes toolbar-fade-in {
  from {
    opacity: 0;
    transform: translateY(-$s-1); // -4px slide up
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
