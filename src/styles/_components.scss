/* === ELECTRON TITLEBAR === */
@use '@/styles/variables' as *;

.-webkit-app-region-drag {
  -webkit-app-region: drag;
}

.-webkit-app-region-no-drag {
  -webkit-app-region: no-drag;
}

/* === INFO ICON TOOLTIPS === */
.info-icon-tooltip {
  color: var(--color-text-subtle);
  cursor: pointer;
  outline: none !important;
  -webkit-tap-highlight-color: transparent;

  &:hover {
    color: var(--color-text-main);
  }
}

.titlebar {
  -webkit-app-region: drag;
}

.titlebar button {
  -webkit-app-region: no-drag;
}

/* === MOBILE OVERLAY COMPONENTS === */
.bg-mobile-overlay {
  background-color: var(--color-bg-overlay);
}

.bg-mobile-sidebar {
  background-color: var(--color-bg-sidebar);
}

.mobile-sidebar-right {
  padding: 15px;
}

/* === REACT-DROPZONE STYLING === */
/* Add cursor pointer for file upload areas */
[class*='dropzone'],
div[role='presentation'] {
  cursor: pointer !important;
  transition: background-color 0.15s ease !important;
}

/* === HEADER ICON BUTTONS === */
/* Common style for header icon buttons in Channel and DirectMessage */
.header-icon-button {
  width: $s-6;
  height: $s-6;
  padding: $s-2;
  border-radius: $rounded-md;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;


  /* Icon styling - increased specificity to override Button styles */
  .quorum-button-icon-element {
    font-size: $text-base;
    color: var(--color-text-subtle) !important;
    transition: color 0.15s ease !important;
  }

  /* Hover state - increased specificity */
  &:hover .quorum-button-icon-element {
    color: var(--color-text-main) !important;
  }

  /* Active state - when panel is open */
  &.active .quorum-button-icon-element {
    color: var(--color-text-main) !important;
  }
}

/* === UNREAD MESSAGE INDICATORS === */
/* Shared unread dot styling for channels and DMs */
/* This provides a consistent visual indicator across all conversation types */
.unread-dot {
  position: absolute;
  width: $s-1; 
  height: $s-1;
  border-radius: $rounded-full;
  background: var(--accent);
  z-index: 10;
  transition: all $duration-100 linear;
}

/* Channel-specific positioning */
/* Positioned to the left of channel icon, vertically centered */
.channel-unread-dot {
  @extend .unread-dot;
  left: -$s-3-5; // Position to the left of the channel content
  top: 50%;
  transform: translateY(-50%); // Center vertically
}

/* DM contact-specific positioning */
/* Positioned to the left of contact item, vertically centered */
.dm-unread-dot {
  @extend .unread-dot;
  left: $s-1-5; // Position to the left of the DM contact
  top: 40%;
  transform: translateY(-50%); // Center vertically
  margin-top: $s-1; // Fine-tune vertical alignment for DM layout
}

/* === LIST FADE EFFECTS === */
/* Bottom fade overlay for scrollable lists (desktop only) */
/* Apply via className - fades content at bottom into background */
/* Variants: .list-bottom-fade (sidebar bg), .list-bottom-fade-chat (chat bg) */

$list-fade-gradient-height: 120px;    /* Height of the gradient overlay - padding is auto-calculated as (height - 40px) */

.list-bottom-fade {
  position: relative;
  --fade-bg: var(--color-bg-sidebar);

  &::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: $border;   // Inset to respect container border (visible in light theme)
    right: $border;
    height: $list-fade-gradient-height;
    background: linear-gradient(to bottom, transparent, var(--fade-bg));
    pointer-events: none;
    z-index: 5;

    @media (max-width: 1023px) {
      display: none;
    }
  }

  // Scrollable content inside needs bottom padding to scroll past the gradient
  .list-fade-content {
    padding-bottom: $list-fade-gradient-height - 40px;

    @media (max-width: 1023px) {
      padding-bottom: 0;
    }
  }

  /* Variant for chat background */
  &-chat {
    @extend .list-bottom-fade;
    --fade-bg: var(--color-bg-chat);
  }
}

/* === ANIMATIONS === */

/* Connecting.tsx */
@keyframes pulse-zoom {
  0% {
    transform: scale(0.5);
    opacity: 0.2;
  }
  50% {
    transform: scale(0.7);
    opacity: 1;
  }
  100% {
    transform: scale(0.5);
    opacity: 0.2;
  }
}

/* === TOAST CONTAINER === */
/* Default: positioned above MessageComposer to avoid overlap */
.toast-container {
  position: fixed;
  right: $s-4;
  max-width: 360px;
  z-index: 2147483647;

  /* Position above MessageComposer: (padding * 2) + button + margin + gap */
  bottom: calc(
    ($composer-padding-mobile * 2) +
    $composer-button-height +
    $composer-margin-bottom-mobile +
    $toast-gap
  );

  @media (min-width: $screen-lg) {
    bottom: calc(
      ($composer-padding-desktop * 2) +
      $composer-button-height +
      $composer-margin-bottom-desktop +
      $toast-gap
    );
  }

  /* For modals/settings: fixed bottom position */
  &.bottom-fixed {
    bottom: $s-4;
  }
}